!function($,e,n,a){"use strict";$(n).ready(function(){function e(){console.log("ajax call to get json for log..."),$.getJSON("./log.json",function(e){console.log("call success");var n=e.length;$.each(e,function(e,a){e>=n-5&&o(a)})}).done(function(){console.log("call and loop success")}).fail(function(){console.error("error")}).always(function(){console.log("complete")})}function n(){$('[name="startTime"]').val()+" EDT";var e=$("#msgForm"),n=e.valid();if(console.log("Form is valid? "+n),n){var a=$("#msgForm").serializeObject();console.log(a);var t=JSON.stringify(a),s=moment().unix();console.log("Right now is: "+s),console.log("Readable EST Timestamp: "+g(s)),$.ajax({url:"endpoint.php",data:{data:t},dataType:"json",type:"POST",beforeSend:function(e){}}).done(function(e){console.log("success"),o(e.json)}).fail(function(e){console.log("fail")}).always(function(e){console.log("done")})}}function o(e){var n=$("#return-table");if(n.length>0){console.log("updating table...");var a=n.find("tbody"),o=j(e);a.append(o)}}function t(){var e=!1,n=$("textarea");$.each(n,function(n,a){a.value.length<=0&&(e=!0)}),e?(i(),v=!1):(s(),v=!0)}function s(){c($("span.add-more-messages").parent())}function i(){u($("span.add-more-messages").parent())}function l(){c($("span.remove-last-message").parent())}function r(){u($("span.remove-last-message").parent())}function c(e){e.removeClass("disabled")}function u(e){e.hasClass("disabled")||e.addClass("disabled")}function m(){if(v){var e=$(h),n=0;e.first().off().clone().appendTo(e.parent()),n=$("textarea").length,$.each($(h),function(e,a){if(e==n-1){var o=$(a).find("textarea");o.val("").attr("placeholder","e.g. All Enterprise Systems and applications are operational."),o.on("input",t)}}),i(),v=!1,l()}}function f(){var e=$(h).length,n=$(h+":last");if(e>1)return n.remove(),e--,void(e<=1&&(r(),t()))}function d(e){var n=$(e.target),a=n.val(),o=$("#submit"),t=$(".form-button");5==a.length?(v=!0,o.prop("disabled",!1)):(v=!1,o.prop("disabled",!0))}function p(e){}function g(e){return moment.unix(e).tz("America/New_York").format("MM/DD HH:mm z")}var h=".form-duplicate-this",v=!1,b=$("#entry-template").html(),j=Handlebars.compile(b),y=$("form#msgForm");y.validate({rules:{empId:{required:!0,digits:!0}}}),$(".dtpicker").datepicker(),$(".add-more-messages").on("click",m),$(".remove-last-message").on("click",f),$("#submit").on("click",n),$("textarea[name=message]").on("input",t),e();var T=moment();console.log("CST: "+T.format()),console.log("EST: "+T.tz("America/New_York").format()),$.ajaxSetup({cache:!1}),setTimeout(function(){$.get("./results.json",function(e){for(var n="",a=0;a<e.startDate.length;a++)n+="<p>"+e.startDate[a]+" "+e.startTime[a]+" "+e.message[a]+"</p>";$("#currentMessage").html(n)})},2e3),$.fn.serializeObject=function(){var e={},n=this.serializeArray();return $.each(n,function(){e[this.name]!==a?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},$("input[name=empId]").on("input",function(e){d(e)})})}(jQuery,window,document);