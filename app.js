!function($,e,n,t){"use strict";$(n).ready(function(){function e(){return b.isDST?(w="EST",console.log("We are currently on EST")):(w="EDT",console.log("We are currently on EDT")),w}function n(){var e=$("#msgForm"),n=e.valid();if(console.log("Form is valid? "+n),n){var t=$("input[name=empId]").val(),a={};x&&(a.dateWarn="true"),a.msgId=t,a.info=$(".form-duplicate-this").serializeObject(),$.each(a.info,function(e,n){n.startTime+=" "+w,""!==n.endTime&&(n.endTime+=" "+w)}),console.log(a);var o=JSON.stringify(a);console.log(o);var r=moment().unix();console.log("Right now is: "+r),console.log("Readable EST Timestamp: "+d(r)),$.ajax({url:"endpoint.php",data:{data:o},dataType:"json",type:"POST"}).done(function(e){console.log("success")}).fail(function(e){console.log("fail")}).always(function(e){console.log("done")})}}function t(){var e=!1,n=$("textarea");$.each(n,function(n,t){t.value.length<=0&&(e=!0)}),e?(o(),h=!1):(a(),h=!0)}function a(){s($("span.add-more-messages").parent())}function o(){c($("span.add-more-messages").parent())}function r(){s($("span.remove-last-message").parent())}function i(){c($("span.remove-last-message").parent())}function s(e){e.removeClass("disabled")}function c(e){e.hasClass("disabled")||e.addClass("disabled")}function l(){if(h){var e=$(v),n=0;e.first().off().clone().appendTo(e.parent()),n=$("textarea").length,$.each($(v),function(e,a){if(e==n-1){var o=$(a).find("textarea");o.val("").attr("placeholder","e.g. All Enterprise Systems and applications are operational."),o.on("input",t)}}),o(),h=!1,r()}}function m(){var e=$(v).length,n=$(v+":last");if(e>1)return n.remove(),e--,void(e<=1&&(i(),t()))}function u(e){var n=$(e.target),t=n.val(),a=$("#submit"),o=$(".form-button");5==t.length?(h=!0,a.prop("disabled",!1)):(h=!1,a.prop("disabled",!0))}function f(e){}function d(e){return moment.unix(e).tz("America/New_York").format("MM/DD HH:mm z")}function p(){$.getJSON("./log.json",function(e){return T=e,console.log("getting the log..."),T})}function g(){return S=JSON.stringify(T),S=S.slice(1,-1),S=JSON.parse(S)}$.ajaxSetup({cache:!1});var v=".form-duplicate-this",h=!1,T,S,Y=$("form#msgForm");Y.validate({rules:{empId:{required:!0,digits:!0}}}),$(".dtpicker").datepicker(),$(".add-more-messages").on("click",l),$(".remove-last-message").on("click",m),$("#submit").on("click",n),$("textarea[name=message]").on("input",t);var y=moment();console.log("EST: "+y.tz("America/New_York").format());var b=moment.tz(y,"America/New_York").format("HH:mm"),N=moment.tz(y,"America/New_York").format("M/D/YYYY"),k=moment().add(1,"days"),j=moment.tz(k,"America/New_York").format("M/D/YYYY"),w;e();var x,O;$.getJSON("dates.json",function(e){$.each(e.regular,function(e,n){if(j===n)return x=!0}),$.each(e.early,function(e,n){if(N===n)return O=!0})}),setTimeout(function(){$.getJSON("./results.json",function(e){var n="";$.each(e.info,function(e,t){n+="<p>"+t.startDate+" ",n+=t.startTime+" ",n+=t.message+"</p>"}),$("#currentMessage").html(n)})},2e3),$.fn.serializeObject=function(){var e=[];return $(this).each(function(n,t){var a={};$.each($(t).find("input"),function(e,n){var t=$(n).attr("name"),o=$(n).val();a[t]=o}),$.each($(t).find("textarea"),function(e,n){var t=$(n).attr("name"),o=$(n).val();a[t]=o}),e.push(a)}),e},$("input[name=empId]").on("input",function(e){u(e)}),p()})}(jQuery,window,document);